

-- test get localhost:8080/api/unitesoins   -> ok

INSERT INTO hopital (nom) VALUES 
('Hôpital Général de la Ville'),
('Centre Médical Saint-Pierre'),
('Clinique des Champs-Élysées');    

INSERT INTO groupe_specialite (nom) VALUES 
('Cardiologie'),
('Neurologie'),
('Pédiatrie'),
('Orthopédie');

INSERT INTO specialisation (nom, groupe_specialite_id) VALUES 
('Cardiologie Interventionnelle', 1),
('Neurologie Pédiatrique', 2),
('Pédiatrie Générale', 3),
('Orthopédie Traumatologique', 4);

{
    "hopital": {
        "id": 1 
    },
    "specialisation": {
        "id": 1 
    },
    "adresse": "123 Rue de l'Urgence",
    "litsDisponibles": 10,
    "latitude": 45.1234567,
    "longitude": 5.9876543
}


-- test get localhost:8080/api/unitesoins/2 -> ok


INSERT INTO unite_soins (hopital_id, specialisation_id, adresse, lits_disponibles, latitude, longitude) VALUES 
    (2, 2, '45 Avenue de la Vitesse, 33000 Bordeaux', 5, 44.837789, -0.57918),
    (3, 4, '12 Rue de l\'Os Cassé, 75008 Paris', 25, 48.8722, 2.3023),
    (1, 3, '123 Rue de la Pédiatrie, 69007 Lyon', 15, 45.7485, 4.8467),
    (2, 1, '88 Boulevard du Cœur, 33000 Bordeaux', 8, 44.8394, -0.5756),
    (2, 4, '46 Avenue de la Vitesse, 33000 Bordeaux', 12, 44.8379, -0.5790);

{
    "hopital": {
        "nom": "Centre Médical Saint-Pierre",
        "id": 2
    },
    "specialisation": {
        "nom": "Neurologie Pédiatrique",
        "groupeSpecialite": {
            "nom": "Neurologie",
            "id": 2
        },
        "id": 2
    },
    "adresse": "45 Avenue de la Vitesse, 33000 Bordeaux",
    "litsDisponibles": 5,
    "latitude": 44.8377890,
    "longitude": -0.5791800,
    "id": 2
}



-- test http://localhost:8080/api/unitesoins/recherche_lit_dispo?specialisation=Cardiologie%20Interventionnelle   -> ok


[
    {
        "hopital": {
            "nom": "Hôpital Général de la Ville",
            "id": 1
        },
        "specialisation": {
            "nom": "Cardiologie Interventionnelle",
            "groupeSpecialite": {
                "nom": "Cardiologie",
                "id": 1
            },
            "id": 1
        },
        "adresse": "123 Rue de l'Urgence",
        "litsDisponibles": 10,
        "latitude": 45.1234567,
        "longitude": 5.9876543,
        "id": 1
    },
    {
        "hopital": {
            "nom": "Centre Médical Saint-Pierre",
            "id": 2
        },
        "specialisation": {
            "nom": "Cardiologie Interventionnelle",
            "groupeSpecialite": {
                "nom": "Cardiologie",
                "id": 1
            },
            "id": 1
        },
        "adresse": "88 Boulevard du Cœur, 33000 Bordeaux",
        "litsDisponibles": 8,
        "latitude": 44.8394000,
        "longitude": -0.5756000,
        "id": 5
    }
]

-- test get http://localhost:8080/api/unitesoins/trajets_optimises?lat=45.18719605665046&lon=5.68936461721841&specialisation=Cardiologie%20Interventionnelle -> ok


[
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 45.1234567,
                "longitude": 5.9876543
            },
            "destinationAdresse": "123 Rue de l'Urgence",
            "distanceMetres": 46995,
            "dureeSecondes": 2665,
            "trajetValide": true
        },
        "hopital": "Hôpital Général de la Ville",
        "litsDisponibles": 10,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 44.8394,
                "longitude": -0.5756
            },
            "destinationAdresse": "88 Boulevard du Cœur, 33000 Bordeaux",
            "distanceMetres": 667164,
            "dureeSecondes": 21591,
            "trajetValide": true
        },
        "hopital": "Centre Médical Saint-Pierre",
        "litsDisponibles": 8,
        "specialisation": "Cardiologie Interventionnelle"
    }
]



-- test http://localhost:8080/api/unitesoins/trajets_optimises?lat=45.18719605665046&lon=5.68936461721841&specialisation=Cardiologie%20Interventionnelle
-- avec les 2 derniers sans lits donc pas affichés & triers par distance -> ok

INSERT INTO unite_soins (hopital_id, specialisation_id, adresse, lits_disponibles, latitude, longitude) VALUES 
(3, 1, '42 Rue du Cœur, 75008 Paris', 7, 48.8722, 2.3023), 
(1, 1, '200 Avenue de l\'Urgence, 69007 Lyon', 12, 45.7538, 4.8436), 
(1, 1, '100 Quai de la Garonne, 33800 Bordeaux', 5, 44.8329, -0.5540),
(2, 1, '50 Rue de la Bonne Mère, 13007 Marseille', 3, 43.2847, 5.3857), 
(3, 1, '25 Allée du Capitole, 31000 Toulouse', 9, 43.6053, 1.4442), 
(1, 1, '15 Boulevard de la Liberté, 59800 Lille', 15, 50.6372, 3.0789), 
(2, 1, '8 Place Royale, 44000 Nantes', 0, 47.2163, -1.5562), 
(3, 1, '9 Avenue des Vosges, 67000 Strasbourg', 0, 48.5833, 7.7516);

[
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 45.1234567,
                "longitude": 5.9876543
            },
            "destinationAdresse": "123 Rue de l'Urgence",
            "distanceMetres": 46995,
            "dureeSecondes": 2618,
            "trajetValide": true
        },
        "hopital": "Hôpital Général de la Ville",
        "litsDisponibles": 10,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 45.7538,
                "longitude": 4.8436
            },
            "destinationAdresse": "200 Avenue de l'Urgence, 69007 Lyon",
            "distanceMetres": 103011,
            "dureeSecondes": 3938,
            "trajetValide": true
        },
        "hopital": "Hôpital Général de la Ville",
        "litsDisponibles": 12,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 43.2847,
                "longitude": 5.3857
            },
            "destinationAdresse": "50 Rue de la Bonne Mère, 13007 Marseille",
            "distanceMetres": 309228,
            "dureeSecondes": 10337,
            "trajetValide": true
        },
        "hopital": "Centre Médical Saint-Pierre",
        "litsDisponibles": 3,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 43.6053,
                "longitude": 1.4442
            },
            "destinationAdresse": "25 Allée du Capitole, 31000 Toulouse",
            "distanceMetres": 529506,
            "dureeSecondes": 16182,
            "trajetValide": true
        },
        "hopital": "Clinique des Champs-Élysées",
        "litsDisponibles": 9,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 48.8722,
                "longitude": 2.3023
            },
            "destinationAdresse": "42 Rue du Cœur, 75008 Paris",
            "distanceMetres": 579797,
            "dureeSecondes": 18210,
            "trajetValide": true
        },
        "hopital": "Clinique des Champs-Élysées",
        "litsDisponibles": 7,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 44.8329,
                "longitude": -0.554
            },
            "destinationAdresse": "100 Quai de la Garonne, 33800 Bordeaux",
            "distanceMetres": 657024,
            "dureeSecondes": 20189,
            "trajetValide": true
        },
        "hopital": "Hôpital Général de la Ville",
        "litsDisponibles": 5,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 44.8394,
                "longitude": -0.5756
            },
            "destinationAdresse": "88 Boulevard du Cœur, 33000 Bordeaux",
            "distanceMetres": 663069,
            "dureeSecondes": 20613,
            "trajetValide": true
        },
        "hopital": "Centre Médical Saint-Pierre",
        "litsDisponibles": 8,
        "specialisation": "Cardiologie Interventionnelle"
    },
    {
        "destinationCalculee": {
            "destinationPosition": {
                "latitude": 50.6372,
                "longitude": 3.0789
            },
            "destinationAdresse": "15 Boulevard de la Liberté, 59800 Lille",
            "distanceMetres": 800445,
            "dureeSecondes": 22926,
            "trajetValide": true
        },
        "hopital": "Hôpital Général de la Ville",
        "litsDisponibles": 15,
        "specialisation": "Cardiologie Interventionnelle"
    }
]



-- test de creation de comptes utilisateurs -> ok

POST http://localhost:8080/api/user/creation
{
"email": "nouvel.utilrjjjiiisateur@domaine.com",
"password": "MotDePasseSecret123",
"nom": "Emrys",
"prenom": "Callait"
}

-- test de connexion -> ok


POST http://localhost:8080/api/user/connection
{
"email": "nouvel.utilrjjjiiisateur@domaine.com",
"password": "MotDePasseSecret123"
}



Retour :[
    {
    "Bearer": "eyJhbGciOiJIUzI1NiJ9.eyJub20iOiJFbXJ5cyIsInByZW5vbSI6IkNhbGxhaXQiLCJyb2xlcyI6IltST0xFX1VTRVJdIiwiZW1haWwiOiJub3V2ZWwudXRpbHJqamppaWlzYXRldXJAZG9tYWluZS5jb20ifQ.csDIq3V8rAthNRXdMnRzYBLrn19TQLDZLBW3ea0hQ8U"
}
]

Vérifier que le token JWT est bien généré et retourné lors de la connexion de l'utilisateur. sur https://www.jwt.io/
mettre le bearer token dans la partie Encoded et la clé secrète dans la partie Verify Signature pour vérifier la validité du token.



-- test get localhost:8080/api/specilites -> ok
-- retour une liste de Groupe de spectiaisation / Spé

INSERT INTO `specialisation` (`nom`, `groupe_specialite_id`) VALUES
('Cardiologie Consultation', 1),
('Cardiologie Rythmologie', 1),
('Cardiologie Électrophysiologie', 1);

[
    {
        "id": 1,
        "nom": "Cardiologie",
        "specialisations": [
            {
                "id": "5",
                "nom": "Cardiologie Consultation"
            },
            {
                "id": "1",
                "nom": "Cardiologie Interventionnelle"
            },
            {
                "id": "6",
                "nom": "Cardiologie Rythmologie"
            },
            {
                "id": "7",
                "nom": "Cardiologie Électrophysiologie"
            }
        ]
    },
    {
        "id": 2,
        "nom": "Neurologie",
        "specialisations": [
            {
                "id": "2",
                "nom": "Neurologie Pédiatrique"
            }
        ]
    },
    {
        "id": 4,
        "nom": "Orthopédie",
        "specialisations": [
            {
                "id": "4",
                "nom": "Orthopédie Traumatologique"
            }
        ]
    },
    {
        "id": 3,
        "nom": "Pédiatrie",
        "specialisations": [
            {
                "id": "3",
                "nom": "Pédiatrie Générale"
            }
        ]
    }
]