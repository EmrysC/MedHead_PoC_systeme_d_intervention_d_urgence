{
	"info": {
		"_postman_id": "38745200-c4e3-4873-a9c1-857a212baa1f",
		"name": "Writing test scripts",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json",
		"_exporter_id": "12803850"
	},
	"item": [
		{
			"name": "MeadHead API tests",
			"item": [
				{
					"name": "/user",
					"item": [
						{
							"name": "/creation",
							"item": [
								{
									"name": "creation -> 200 utilisateur créé",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// Test du code de statut HTTP\r",
													"pm.test(\"L'utilisateur est créé avec succès (200 OK)\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"//Vérification du temps de réponse (optionnel mais recommandé)\r",
													"pm.test(\"Temps de réponse inférieur à 800ms\", function () {\r",
													"    pm.expect(pm.response.responseTime).to.be.below(800);\r",
													"});\r",
													"\r",
													"// Vérifier que le corps de la réponse est vide \r",
													"pm.test(\"Le corps de la réponse est vide\", function () {\r",
													"    pm.expect(pm.response.text()).to.equal(\"\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										},
										{
											"listen": "prerequest",
											"script": {
												"exec": [
													""
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"utilisateur.non@existant1.com\",\n    \"password\": \"MotDePasseSecret123&\",\n    \"nom\": \"paul\",\n    \"prenom\" : \"martin\"\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "creation -> 400 Champ vide",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// Vérifier que le serveur renvoie bien une erreur 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// Vérifier la structure et le contenu du JSON d'erreur\r",
													"pm.test(\"L'erreur concerne bien le champ 'nom' manquant\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérification du message principal\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Vérification que l'erreur précise est dans la map \"errors\"\r",
													"    pm.expect(jsonData.errors).to.have.property(\"nom\");\r",
													"    pm.expect(jsonData.errors.nom).to.eql(\"Le nom de passe ne peut pas être vide.\");\r",
													"});\r",
													"\r",
													"// Vérifier la présence des autres champs obligatoires de ton DTO d'erreur\r",
													"pm.test(\"La réponse contient le timestamp et le path\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData).to.have.property(\"path\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"nouvel.utilisateeeeer@domaine.com\",\n    \"password\": \"MotDePasseSecret123&\",\n    \"prenom\" : \"martin\"\n}"
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "creation -> 400 email ko",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// Vérification du code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// Vérification du contenu des erreurs cumulées\r",
													"pm.test(\"Les messages d'erreur pour l'email et le password sont corrects\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérification du message global\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Vérification de l'erreur sur le mot de passe\r",
													"    pm.expect(jsonData.errors).to.have.property(\"password\");\r",
													"    pm.expect(jsonData.errors.password).to.contain(\"au moins 8 caractères\");\r",
													"    \r",
													"    // Vérification de l'erreur sur l'email\r",
													"    pm.expect(jsonData.errors).to.have.property(\"email\");\r",
													"    pm.expect(jsonData.errors.email).to.eql(\"L'email doit être au format valide.\");\r",
													"});\r",
													"\r",
													"// Vérification de la structure technique\r",
													"pm.test(\"Structure ErrorDetails complète\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"nouvel.utilisateeeeerdomaine.com\",\n    \"password\": \"MotDePasseSecret123\",\n    \"nom\": \"paul\",\n    \"prenom\" : \"martin\"\n}"
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "creation-> 400 email vide",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// Vérification du code de statut\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// Vérification des messages d'erreurs multiples\r",
													"pm.test(\"Validation des messages pour 'email' et 'password'\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérification de l'erreur sur l'email\r",
													"    pm.expect(jsonData.errors).to.have.property(\"email\");\r",
													"    pm.expect(jsonData.errors.email).to.eql(\"L'email ne peut pas être vide.\");\r",
													"    \r",
													"    // Vérification de l'erreur sur le mot de passe\r",
													"    pm.expect(jsonData.errors).to.have.property(\"password\");\r",
													"    pm.expect(jsonData.errors.password).to.contain(\"au moins 8 caractères\");\r",
													"});\r",
													"\r",
													"// Vérification de la cohérence du message global et du path\r",
													"pm.test(\"Détails de la réponse conformes\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/user/creation\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \n    \"password\": \"MotDePasseSecret123\",\n    \"nom\": \"paul\",\n    \"prenom\" : \"martin\"\n}"
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "creation -> 400 pwd < 8",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier que le statut est bien 400 Bad Request\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier le contenu précis du JSON d'erreur\r",
													"pm.test(\"Validation du message d'erreur pour mot de passe trop court\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérification de la clé 'password' dans l'objet 'errors'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"password\");\r",
													"    // On vérifie que le message contient les mots clés essentiels\r",
													"    pm.expect(jsonData.errors.password).to.include(\"au moins 8 caractères\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier la cohérence technique du retour\r",
													"pm.test(\"Format de réponse ErrorDetails valide\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/user/creation\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"nouvel.utilisateeeeer@domaine.com\",\n    \"password\": \"aaa\",\n    \"nom\": \"paul\",\n    \"prenom\" : \"martin\"\n}"
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "creation -> 400 pwd weak",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message d'erreur détaillé\r",
													"pm.test(\"Validation du message d'erreur complexe pour le password\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // On vérifie que la clé 'password' existe bien dans l'objet 'errors'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"password\");\r",
													"    \r",
													"    // Utilisation de .to.include pour être plus flexible sur la ponctuation\r",
													"    var msg = jsonData.errors.password;\r",
													"    pm.expect(msg).to.include(\"au moins 8 caractères\");\r",
													"    pm.expect(msg).to.include(\"majuscule\");\r",
													"    pm.expect(msg).to.include(\"caractère spécial\");\r",
													"});\r",
													"\r",
													"// 3. Vérification de la structure globale ErrorDetails\r",
													"pm.test(\"Structure ErrorDetails complète et valide\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/user/creation\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"nouvel.utilisateur1@domaine.com\",\n    \"password\": \"aaaaaaaaaa\",\n    \"nom\": \"paul\",\n    \"prenom\" : \"martin\"\n}"
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "creation -> 409 utilisateur existant",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut 409 (Conflict)\r",
													"pm.test(\"Statut attendu : 409 Conflict\", function () {\r",
													"    pm.response.to.have.status(409);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message de conflit et de la cause (email)\r",
													"pm.test(\"Le conflit concerne bien l'email déjà existant\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérification du message principal\r",
													"    pm.expect(jsonData.message).to.eql(\"Conflit de données\");\r",
													"    \r",
													"    // Vérification que la clé 'email' est présente dans 'errors'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"email\");\r",
													"    \r",
													"    // Vérification que le message contient l'email envoyé (pour être précis)\r",
													"    var emailEnvoye = pm.request.body.raw ? JSON.parse(pm.request.body.raw).email : \"\";\r",
													"    pm.expect(jsonData.errors.email).to.include(emailEnvoye);\r",
													"    pm.expect(jsonData.errors.email).to.include(\"déjà utilisée\");\r",
													"});\r",
													"\r",
													"// 3. Vérification technique de la réponse\r",
													"pm.test(\"Structure ErrorDetails complète (409)\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/user/creation\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"utilisateur.deja@existant.com\",\n    \"password\": \"MotDePasseSecret123&\",\n    \"nom\": \"paul\",\n    \"prenom\" : \"martin\"\n}"
										},
										"url": "{{base_url}}/user/creation"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								}
							]
						},
						{
							"name": "/connection",
							"item": [
								{
									"name": "conection -> 200 sucess",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut\r",
													"pm.test(\"Connexion réussie : 200 OK\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"// 2. Vérifier la présence et le format du Token\r",
													"pm.test(\"Le token Bearer est présent et bien formé\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // CORRECTION : On définit la variable 'token' avant de l'utiliser\r",
													"    // On extrait la valeur depuis 'jsonData.Bearer'\r",
													"    var tokenValue = jsonData.Bearer; \r",
													"\r",
													"    // Vérifie que la propriété existe bien\r",
													"    pm.expect(jsonData).to.have.property(\"Bearer\");\r",
													"    \r",
													"    // Vérifie le format\r",
													"    pm.expect(tokenValue).to.be.a('string');\r",
													"    pm.expect(tokenValue.length).to.be.above(10);\r",
													"    \r",
													"    // SAUVEGARDE : Utilise le nom de la variable définie au-dessus\r",
													"    pm.collectionVariables.set(\"token_jwt\", tokenValue);\r",
													"    \r",
													"    console.log(\"Token JWT sauvegardé avec succès !\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier le temps de réponse\r",
													"pm.test(\"Réponse de connexion < 2s\", function () {\r",
													"    pm.expect(pm.response.responseTime).to.be.below(2000);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": ""
											}
										},
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"email\": \"utilisateur.possede@compte.com\",\n\"password\": \"MotDePasseSecret123\"\n}"
										},
										"url": "{{base_url}}/user/connection"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "conection -> 400 Pas de compte",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier que le statut est 401 (ou 404 selon ta config, ici 401 Unauthorized est courant pour la sécurité)\r",
													"pm.test(\"Statut attendu : Échec d'authentification\", function () {\r",
													"    // Vérifie si ton API renvoie 401 ou 404. D'après tes logs précédents, c'est souvent 401.\r",
													"    pm.expect(pm.response.code).to.be.oneOf([401, 404]);\r",
													"});\r",
													"\r",
													"// 2. Vérifier le message d'erreur spécifique\r",
													"pm.test(\"Message d'utilisateur non trouvé\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Échec\");\r",
													"    pm.expect(jsonData.errors).to.have.property(\"UsernameNotFoundException\");\r",
													"    pm.expect(jsonData.errors.UsernameNotFoundException).to.include(\"Utilisateur non trouvé\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier la structure ErrorDetails\r",
													"pm.test(\"Structure de réponse complète\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/user/connection\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n    \"email\": \"nouvel.utilisateeeeer@domaine.com\",\n    \"password\": \"MotDePasseSecret1234\"\n\n}"
										},
										"url": "{{base_url}}/user/connection"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "conection -> 400 Mauvais champ",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier que le statut est 400 Bad Request\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier que l'erreur porte sur le mot de passe vide\r",
													"pm.test(\"Message d'erreur pour mot de passe vide\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    pm.expect(jsonData.errors).to.have.property(\"password\");\r",
													"    pm.expect(jsonData.errors.password).to.eql(\"Le mot de passe ne peut pas être vide.\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier que le chemin (path) est correct\r",
													"pm.test(\"Le chemin de l'API est correct\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/user/connection\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"email\": \"utilisateur.possede@compte.com\",\n\"passwrd\": \"MotDePasseSecretko\"\n}"
										},
										"url": "{{base_url}}/user/connection"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								},
								{
									"name": "conection -> 401 Mauvais mdp",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier que le statut est 401 Unauthorized\r",
													"pm.test(\"Statut attendu : 401 Unauthorized\", function () {\r",
													"    pm.response.to.have.status(401);\r",
													"});\r",
													"\r",
													"// 2. Vérifier le type d'erreur de sécurité\r",
													"pm.test(\"Erreur de credentials détectée\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Échec\");\r",
													"    // On vérifie que la clé spécifique à Spring Security est présente\r",
													"    pm.expect(jsonData.errors).to.have.property(\"BadCredentialsException\");\r",
													"    pm.expect(jsonData.errors.BadCredentialsException).to.include(\"Bad credentials\");\r",
													"});\r",
													"\r",
													"// 3. Mesurer la performance\r",
													"pm.test(\"Délai de réponse de sécurité raisonnable\", function () {\r",
													"    // Les vérifications de mot de passe sont volontairement un peu plus lentes (hachage)\r",
													"    pm.expect(pm.response.responseTime).to.be.below(1500);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"request": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\"email\": \"utilisateur.possede@compte.com\",\n\"password\": \"MotDePasseSecretko\"\n}"
										},
										"url": "{{base_url}}/user/connection"
									},
									"response": [
										{
											"name": "Success response",
											"originalRequest": {
												"method": "POST",
												"header": [
													{
														"key": "Content-Type",
														"value": "application/json",
														"name": "Content-Type",
														"type": "text"
													}
												],
												"body": {
													"mode": "raw",
													"raw": "{\n\t\"method\": \"POST\"\n}"
												},
												"url": "https://postman-echo.com/post"
											},
											"status": "OK",
											"code": 200,
											"_postman_previewlanguage": "json",
											"header": [
												{
													"key": "Content-Encoding",
													"value": "gzip"
												},
												{
													"key": "Content-Type",
													"value": "application/json; charset=utf-8"
												},
												{
													"key": "Date",
													"value": "Thu, 04 Oct 2018 13:16:50 GMT"
												},
												{
													"key": "ETag",
													"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
												},
												{
													"key": "Server",
													"value": "nginx"
												},
												{
													"key": "Vary",
													"value": "Accept-Encoding"
												},
												{
													"key": "Content-Length",
													"value": "376"
												},
												{
													"key": "Connection",
													"value": "keep-alive"
												}
											],
											"cookie": [],
											"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
										}
									]
								}
							]
						}
					]
				},
				{
					"name": "/specialitees",
					"item": [
						{
							"name": "specilites -> 200 sucess",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérifier que le statut est 200 OK\r",
											"pm.test(\"Statut attendu : 200 OK\", function () {\r",
											"    pm.response.to.have.status(200);\r",
											"});\r",
											"\r",
											"// 2. Vérifier que la réponse est un tableau non vide\r",
											"pm.test(\"La réponse est un tableau de spécialités\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.be.an('array');\r",
											"    pm.expect(jsonData.length).to.be.above(0);\r",
											"});\r",
											"\r",
											"// 3. Vérifier la structure du premier élément (échantillon)\r",
											"pm.test(\"Le format des catégories est correct (id, nom, specialisations)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var firstCategory = jsonData[0];\r",
											"\r",
											"    pm.expect(firstCategory).to.have.property('id');\r",
											"    pm.expect(firstCategory).to.have.property('nom');\r",
											"    pm.expect(firstCategory.specialisations).to.be.an('array');\r",
											"});\r",
											"\r",
											"// 4. Vérifier la structure d'une spécialisation interne\r",
											"pm.test(\"Le format des spécialisations est correct (id, nom)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    var firstSpec = jsonData[0].specialisations[0];\r",
											"\r",
											"    pm.expect(firstSpec).to.have.property('id');\r",
											"    pm.expect(firstSpec).to.have.property('nom');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "GET",
								"header": [],
								"url": "{{base_url}}/specilites"
							},
							"response": []
						}
					]
				},
				{
					"name": "/unitesoins",
					"item": [
						{
							"name": "/trajets",
							"item": [
								{
									"name": "trajet -> 200 avec adresse",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Validation du statut\r",
													"pm.test(\"Statut attendu : 200 OK\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"// 2. Validation de la structure principale\r",
													"pm.test(\"La réponse contient les blocs attendus\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property('specialisationDetailDTO');\r",
													"    pm.expect(jsonData).to.have.property('trajetsCalculesValide');\r",
													"});\r",
													"\r",
													"// 3. Test sur les détails de la spécialité\r",
													"pm.test(\"Les détails de spécialisation sont corrects\", function () {\r",
													"    var details = pm.response.json().specialisationDetailDTO;\r",
													"    pm.expect(details.specialisationNom).to.be.a('string');\r",
													"    pm.expect(details.specialisationId).to.be.a('number');\r",
													"});\r",
													"\r",
													"// 4. Test sur la liste des hôpitaux et trajets\r",
													"pm.test(\"La liste des hôpitaux n'est pas vide\", function () {\r",
													"    var unites = pm.response.json().trajetsCalculesValide.unitesSoinsTrajets;\r",
													"    pm.expect(unites).to.be.an('array');\r",
													"    pm.expect(unites.length).to.be.above(0);\r",
													"});\r",
													"\r",
													"// 5. Vérification d'un hôpital précis\r",
													"pm.test(\"Chaque hôpital a un nom et des lits disponibles\", function () {\r",
													"    var firstHospital = pm.response.json().trajetsCalculesValide.unitesSoinsTrajets[0];\r",
													"    pm.expect(firstHospital.nomHopital).to.not.be.null;\r",
													"    pm.expect(firstHospital.litsDisponibles).to.be.at.least(0);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=5&adresse=10%20rue%20de%20Paris",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "5"
												},
												{
													"key": "adresse",
													"value": "10%20rue%20de%20Paris"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 200 avec position gps",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Validation du statut\r",
													"pm.test(\"Statut attendu : 200 OK\", function () {\r",
													"    pm.response.to.have.status(200);\r",
													"});\r",
													"\r",
													"// 2. Validation de la structure principale\r",
													"pm.test(\"La réponse contient les blocs attendus\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property('specialisationDetailDTO');\r",
													"    pm.expect(jsonData).to.have.property('trajetsCalculesValide');\r",
													"});\r",
													"\r",
													"// 3. Test sur les détails de la spécialité\r",
													"pm.test(\"Les détails de spécialisation sont corrects\", function () {\r",
													"    var details = pm.response.json().specialisationDetailDTO;\r",
													"    pm.expect(details.specialisationNom).to.be.a('string');\r",
													"    pm.expect(details.specialisationId).to.be.a('number');\r",
													"});\r",
													"\r",
													"// 4. Test sur la liste des hôpitaux et trajets\r",
													"pm.test(\"La liste des hôpitaux n'est pas vide\", function () {\r",
													"    var unites = pm.response.json().trajetsCalculesValide.unitesSoinsTrajets;\r",
													"    pm.expect(unites).to.be.an('array');\r",
													"    pm.expect(unites.length).to.be.above(0);\r",
													"});\r",
													"\r",
													"// 5. Vérification d'un hôpital précis\r",
													"pm.test(\"Chaque hôpital a un nom et des lits disponibles\", function () {\r",
													"    var firstHospital = pm.response.json().trajetsCalculesValide.unitesSoinsTrajets[0];\r",
													"    pm.expect(firstHospital.nomHopital).to.not.be.null;\r",
													"    pm.expect(firstHospital.litsDisponibles).to.be.at.least(0);\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=5&latitude=45.18&longitude=5.72",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "5"
												},
												{
													"key": "latitude",
													"value": "45.18"
												},
												{
													"key": "longitude",
													"value": "5.72"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Trop d'informations",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier la logique métier du message d'erreur\r",
													"pm.test(\"Erreur de conflit de localisation détectée\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Vérifier que la clé d'erreur est bien 'methode_localisation'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"methode_localisation\");\r",
													"    \r",
													"    // Vérifier que le message explique bien le problème (soit l'un, soit l'autre)\r",
													"    var errorMsg = jsonData.errors.methode_localisation;\r",
													"    pm.expect(errorMsg).to.include(\"soit l'adresse, soit le GPS\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier la structure de l'objet ErrorDetails\r",
													"pm.test(\"Structure ErrorDetails complète\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&adresse=Paris&latitude=45.1&longitude=5.7",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "adresse",
													"value": "Paris"
												},
												{
													"key": "latitude",
													"value": "45.1"
												},
												{
													"key": "longitude",
													"value": "5.7"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Données manquantes",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier que l'erreur signale bien l'absence de données\r",
													"pm.test(\"Erreur de données de localisation manquantes\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Vérifier la clé spécifique\r",
													"    pm.expect(jsonData.errors).to.have.property(\"methode_localisation\");\r",
													"    \r",
													"    // Vérifier que le message demande bien une adresse ou un GPS\r",
													"    var errorMsg = jsonData.errors.methode_localisation;\r",
													"    pm.expect(errorMsg).to.include(\"Données manquantes\");\r",
													"    pm.expect(errorMsg).to.include(\"adresse complète ou des coordonnées GPS\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier la cohérence du path\r",
													"pm.test(\"Le chemin de l'API est correct\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData.path).to.equal(\"uri=/api/unitesoins/trajets\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Latitude borne sup",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message d'erreur de borne\r",
													"pm.test(\"Erreur de limite de latitude détectée\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // On vérifie que la clé 'latitude' est présente\r",
													"    pm.expect(jsonData.errors).to.have.property(\"latitude\");\r",
													"    \r",
													"    // On vérifie le message de contrainte\r",
													"    pm.expect(jsonData.errors.latitude).to.include(\"inférieure ou égale à 90\");\r",
													"});\r",
													"\r",
													"// 3. Vérification de la structure technique\r",
													"pm.test(\"Structure ErrorDetails complète\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&latitude=93&longitude=5.0",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "latitude",
													"value": "93"
												},
												{
													"key": "longitude",
													"value": "5.0"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Latitude borne inf",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier le message d'erreur pour la borne inférieure\r",
													"pm.test(\"Erreur de limite minimale de latitude détectée\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Vérifier la présence de l'erreur sur le champ 'latitude'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"latitude\");\r",
													"    \r",
													"    // Vérifier que le message mentionne bien la limite de -90\r",
													"    pm.expect(jsonData.errors.latitude).to.include(\"supérieure ou égale à -90\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier le format technique de l'erreur\r",
													"pm.test(\"La réponse contient le timestamp et le path\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/unitesoins/trajets\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&latitude=-91&longitude=5.0",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "latitude",
													"value": "-91"
												},
												{
													"key": "longitude",
													"value": "5.0"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Longitude borne sup",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier le message d'erreur pour la longitude\r",
													"pm.test(\"Erreur de limite maximale de longitude détectée\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // On vérifie que le champ en erreur est bien la longitude\r",
													"    pm.expect(jsonData.errors).to.have.property(\"longitude\");\r",
													"    \r",
													"    // On vérifie la contrainte de 180\r",
													"    pm.expect(jsonData.errors.longitude).to.include(\"inférieure ou égale à 180\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier le chemin d'accès\r",
													"pm.test(\"L'URI demandée est correcte\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/unitesoins/trajets\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&latitude=5.0&longitude=225.0",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "latitude",
													"value": "5.0"
												},
												{
													"key": "longitude",
													"value": "225.0"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Longitude borne inf",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier le message d'erreur pour la borne inférieure de longitude\r",
													"pm.test(\"Erreur de limite minimale de longitude détectée\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // On vérifie que le champ en erreur est bien la longitude\r",
													"    pm.expect(jsonData.errors).to.have.property(\"longitude\");\r",
													"    \r",
													"    // On vérifie la contrainte de -180\r",
													"    pm.expect(jsonData.errors.longitude).to.include(\"supérieure ou égale à -180\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier la cohérence de la réponse\r",
													"pm.test(\"La réponse contient les métadonnées techniques\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/unitesoins/trajets\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&latitude=5.0&longitude=-200.25",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "latitude",
													"value": "5.0"
												},
												{
													"key": "longitude",
													"value": "-200.25"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Donées adresse ko",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérifier le code de statut 400\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérifier que les deux erreurs sont présentes\r",
													"pm.test(\"L'API renvoie bien les deux erreurs de validation\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // On vérifie le message global\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Erreur 1 : Méthode de localisation\r",
													"    pm.expect(jsonData.errors).to.have.property(\"methode_localisation\");\r",
													"    pm.expect(jsonData.errors.methode_localisation).to.include(\"Données manquantes\");\r",
													"    \r",
													"    // Erreur 2 : Taille de l'adresse\r",
													"    pm.expect(jsonData.errors).to.have.property(\"adresse\");\r",
													"    pm.expect(jsonData.errors.adresse).to.include(\"entre 5 et 255 caractères\");\r",
													"});\r",
													"\r",
													"// 3. Vérifier le format technique\r",
													"pm.test(\"Le format ErrorDetails est respecté\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=5&adresse=",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "5"
												},
												{
													"key": "adresse",
													"value": ""
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 DTO Donées adresse ko espaces",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut HTTP\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérification de la structure et du contenu de l'erreur\r",
													"pm.test(\"L'erreur contient le message de localisation manquante\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérifier le message principal\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
													"    \r",
													"    // Vérifier que la clé spécifique existe dans l'objet 'errors'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"methode_localisation\");\r",
													"    \r",
													"    // Vérifier le contenu du message d'erreur\r",
													"    var errorMsg = jsonData.errors.methode_localisation;\r",
													"    pm.expect(errorMsg).to.include(\"Données manquantes\");\r",
													"    pm.expect(errorMsg).to.include(\"adresse complète ou des coordonnées GPS\");\r",
													"});\r",
													"\r",
													"// 3. Vérification des métadonnées techniques\r",
													"pm.test(\"La réponse contient un timestamp et le chemin correct\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/unitesoins/trajets\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble \",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=5&adresse=           ",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "5"
												},
												{
													"key": "adresse",
													"value": "           "
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 400 Mismath arg",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut HTTP\r",
													"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
													"    pm.response.to.have.status(400);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message d'erreur de formatage\r",
													"pm.test(\"L'API détecte que le format Double est requis\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérifier le titre de l'erreur\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de format de paramètre\");\r",
													"    \r",
													"    // Vérifier que c'est bien le champ 'latitude' qui est ciblé\r",
													"    pm.expect(jsonData.errors).to.have.property(\"latitude\");\r",
													"    \r",
													"    // Vérifier que le message mentionne explicitement le type attendu\r",
													"    pm.expect(jsonData.errors.latitude).to.include(\"doit être un Double\");\r",
													"});\r",
													"\r",
													"// 3. Validation de la structure ErrorDetails\r",
													"pm.test(\"La réponse contient toutes les métadonnées techniques\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&latitude=ABCD&longitude=5.0",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "latitude",
													"value": "ABCD"
												},
												{
													"key": "longitude",
													"value": "5.0"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 403 Forbiden (mauvais token)",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut HTTP\r",
													"pm.test(\"Statut attendu : 403 Forbidden\", function () {\r",
													"    pm.response.to.have.status(403);\r",
													"});\r",
													"\r",
													"// 2. Vérification de la nature de l'erreur\r",
													"pm.test(\"L'erreur est bien un refus d'accès (Forbidden)\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérifier le champ 'error'\r",
													"    pm.expect(jsonData.error).to.eql(\"Forbidden\");\r",
													"    \r",
													"    // Vérifier que le statut numérique dans le corps JSON correspond\r",
													"    pm.expect(jsonData.status).to.eql(403);\r",
													"});\r",
													"\r",
													"// 3. Validation de la structure de sécurité standard\r",
													"pm.test(\"La réponse contient les détails du refus\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
													"    pm.expect(jsonData.path).to.contain(\"/api/unitesoins/trajets\");\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "aaaa"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=1&latitude=ABCD&longitude=5.0",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "1"
												},
												{
													"key": "latitude",
													"value": "ABCD"
												},
												{
													"key": "longitude",
													"value": "5.0"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 404 Pas de lit disponible",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut (404 est le plus commun pour une ressource non trouvée)\r",
													"pm.test(\"Statut attendu : 404 Not Found\", function () {\r",
													"    pm.response.to.have.status(404);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message d'indisponibilité\r",
													"pm.test(\"Le message d'erreur indique l'absence de lits\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérifier le message global\r",
													"    pm.expect(jsonData.message).to.eql(\"Indisponibilité\");\r",
													"    \r",
													"    // Vérifier que l'erreur cible la spécialisation\r",
													"    pm.expect(jsonData.errors).to.have.property(\"specialisation\");\r",
													"    pm.expect(jsonData.errors.specialisation).to.include(\"Aucun lit disponible\");\r",
													"    pm.expect(jsonData.errors.specialisation).to.include(\"id : 4\");\r",
													"});\r",
													"\r",
													"// 3. Validation technique\r",
													"pm.test(\"Structure ErrorDetails complète\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=4&adresse=10%20rue%20de%20Paris",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "4"
												},
												{
													"key": "adresse",
													"value": "10%20rue%20de%20Paris"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 404 adresse inexistante",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut (422 ou 404 selon ta configuration)\r",
													"pm.test(\"Statut attendu : Erreur de traitement\", function () {\r",
													"    pm.expect(pm.response.code).to.be.oneOf([422, 404]);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message d'erreur spécifique au service externe\r",
													"pm.test(\"L'erreur signale un échec de calcul d'itinéraire\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérifier le message global\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de localisation ou de trajet\");\r",
													"    \r",
													"    // Vérifier le détail dans l'objet 'errors'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"trajets\");\r",
													"    pm.expect(jsonData.errors.trajets).to.include(\"Impossible de calculer les trajets optimisés\");\r",
													"    pm.expect(jsonData.errors.trajets).to.include(\"service externe\");\r",
													"});\r",
													"\r",
													"// 3. Validation de la structure ErrorDetails\r",
													"pm.test(\"Le format de réponse est cohérent avec les autres erreurs\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=5&adresse=1 rue inexistante 99001 inconue",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "5"
												},
												{
													"key": "adresse",
													"value": "1 rue inexistante 99001 inconue"
												}
											]
										}
									},
									"response": []
								},
								{
									"name": "trajet -> 404 position gps impossible",
									"event": [
										{
											"listen": "test",
											"script": {
												"exec": [
													"// 1. Vérification du code de statut\r",
													"// On attend généralement 422 (Unprocessable Entity) ou 404 dans ce cas métier\r",
													"pm.test(\"Statut attendu : Erreur de traitement technique\", function () {\r",
													"    pm.expect(pm.response.code).to.be.oneOf([422, 404]);\r",
													"});\r",
													"\r",
													"// 2. Vérification du message d'erreur lié au service externe\r",
													"pm.test(\"L'erreur mentionne l'échec du service de trajet\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    \r",
													"    // Vérifier le message global\r",
													"    pm.expect(jsonData.message).to.eql(\"Erreur de localisation ou de trajet\");\r",
													"    \r",
													"    // Vérifier le détail spécifique dans 'errors'\r",
													"    pm.expect(jsonData.errors).to.have.property(\"trajets\");\r",
													"    pm.expect(jsonData.errors.trajets).to.include(\"service externe\");\r",
													"    pm.expect(jsonData.errors.trajets).to.include(\"aucun itinéraire valide\");\r",
													"});\r",
													"\r",
													"// 3. Validation de la structure ErrorDetails\r",
													"pm.test(\"Structure technique complète\", function () {\r",
													"    var jsonData = pm.response.json();\r",
													"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
													"});"
												],
												"type": "text/javascript",
												"packages": {},
												"requests": {}
											}
										}
									],
									"protocolProfileBehavior": {
										"disableBodyPruning": true
									},
									"request": {
										"auth": {
											"type": "bearer",
											"bearer": {
												"token": "{{token_jwt}}"
											}
										},
										"method": "GET",
										"header": [],
										"body": {
											"mode": "raw",
											"raw": "{\r\n    \"specialisationId\": \"1\",\r\n    \"adresse\": \"1 rue gustave eiffel 38000 Grenoble\",\r\n    \"latitude\" : 45.18993329216459,\r\n    \"longitude\" : 5.723439400098214\r\n\r\n}",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{base_url}}/unitesoins/trajets?specialisationId=5&latitude=-79.986340&longitude=-57.7458209",
											"host": [
												"{{base_url}}"
											],
											"path": [
												"unitesoins",
												"trajets"
											],
											"query": [
												{
													"key": "specialisationId",
													"value": "5"
												},
												{
													"key": "latitude",
													"value": "-79.986340"
												},
												{
													"key": "longitude",
													"value": "-57.7458209"
												}
											]
										}
									},
									"response": []
								}
							]
						}
					]
				},
				{
					"name": "/reservation",
					"item": [
						{
							"name": "reservation -> 200 reservation effectuée",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérifier que la réservation a bien été reçue (204 No Content)\r",
											"pm.test(\"Statut attendu : 204 No Content\", function () {\r",
											"    pm.response.to.have.status(204);\r",
											"});\r",
											"\r",
											"// 2. Vérifier le temps de réponse (Correction de ton erreur précédente)\r",
											"pm.test(\"Réponse de réservation < 500ms\", function () {\r",
											"    // Note : On utilise pm.response.responseTime et non pm.request\r",
											"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": 1 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation  -> 400 format de données ko",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérifier le code de statut 400\r",
											"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"// 2. Vérifier le message d'erreur de parsing\r",
											"pm.test(\"L'erreur de format JSON est bien signalée\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le message global\r",
											"    pm.expect(jsonData.message).to.eql(\"Format JSON invalide\");\r",
											"    \r",
											"    // Vérifier le détail dans l'objet 'errors'\r",
											"    pm.expect(jsonData.errors).to.have.property(\"format\");\r",
											"    pm.expect(jsonData.errors.format).to.include(\"format de la donnée est invalide\");\r",
											"});\r",
											"\r",
											"// 3. Vérifier la cohérence du chemin\r",
											"pm.test(\"Le chemin de l'API est correct\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.path).to.equal(\"uri=/api/reservation/lit\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": aaa }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation  -> 400 entier positif trop grand",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérification du code de statut 400 Bad Request\r",
											"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"// 2. Vérification du message d'erreur de parsing\r",
											"pm.test(\"L'erreur de format JSON est bien signalée\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le message global\r",
											"    pm.expect(jsonData.message).to.eql(\"Format JSON invalide\");\r",
											"    \r",
											"    // Vérifier la présence de la clé 'format' dans l'objet 'errors'\r",
											"    pm.expect(jsonData.errors).to.have.property(\"format\");\r",
											"    \r",
											"    // Vérifier que le message guide l'utilisateur sur le problème\r",
											"    pm.expect(jsonData.errors.format).to.include(\"format de la donnée est invalide\");\r",
											"});\r",
											"\r",
											"// 3. Validation de l'URI\r",
											"pm.test(\"Le chemin de l'API est correct\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData.path).to.equal(\"uri=/api/reservation/lit\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": 100000000000000000000000000000000000000000000000 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation -> 403 Forbiden (mauvais token)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérification du code de statut HTTP\r",
											"pm.test(\"Statut attendu : 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"// 2. Vérification de la nature de l'erreur\r",
											"pm.test(\"L'erreur est bien un refus d'accès (Forbidden)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le champ 'error'\r",
											"    pm.expect(jsonData.error).to.eql(\"Forbidden\");\r",
											"    \r",
											"    // Vérifier que le statut numérique dans le corps JSON correspond\r",
											"    pm.expect(jsonData.status).to.eql(403);\r",
											"});\r",
											"\r",
											"// 3. Validation de la structure de sécurité standard\r",
											"pm.test(\"La réponse contient les détails du refus\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
											"    pm.expect(jsonData.path).to.contain(\"/api/reservation/lit\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "zzzzz"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": 1 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation  -> 403 Forbiden (pas de token)",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérification du code de statut HTTP\r",
											"pm.test(\"Statut attendu : 403 Forbidden\", function () {\r",
											"    pm.response.to.have.status(403);\r",
											"});\r",
											"\r",
											"// 2. Vérification de la nature de l'erreur\r",
											"pm.test(\"L'erreur est bien un refus d'accès (Forbidden)\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le champ 'error'\r",
											"    pm.expect(jsonData.error).to.eql(\"Forbidden\");\r",
											"    \r",
											"    // Vérifier que le statut numérique dans le corps JSON correspond\r",
											"    pm.expect(jsonData.status).to.eql(403);\r",
											"});\r",
											"\r",
											"// 3. Validation de la structure de sécurité standard\r",
											"pm.test(\"La réponse contient les détails du refus\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.property(\"timestamp\");\r",
											"    pm.expect(jsonData.path).to.contain(\"/api/reservation/lit\");\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": ""
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": 1 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation  -> 404 id introuvable",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérification du code de statut HTTP\r",
											"pm.test(\"Statut attendu : 404 Not Found\", function () {\r",
											"    pm.response.to.have.status(404);\r",
											"});\r",
											"\r",
											"// 2. Vérification de la logique du message d'erreur\r",
											"pm.test(\"L'erreur signale bien l'ID introuvable\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le message global\r",
											"    pm.expect(jsonData.message).to.eql(\"Ressource Introuvable\");\r",
											"    \r",
											"    // Vérifier la précision de l'erreur dans l'objet 'errors'\r",
											"    pm.expect(jsonData.errors).to.have.property(\"id_unite_soins\");\r",
											"    pm.expect(jsonData.errors.id_unite_soins).to.include(\"ID '1000'\");\r",
											"    pm.expect(jsonData.errors.id_unite_soins).to.include(\"introuvable\");\r",
											"});\r",
											"\r",
											"// 3. Validation de la structure technique\r",
											"pm.test(\"La réponse respecte le format ErrorDetails\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": 1000 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation  -> 404 id entier positif",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérification du code de statut HTTP\r",
											"pm.test(\"Statut attendu : 400 Bad Request\", function () {\r",
											"    pm.response.to.have.status(400);\r",
											"});\r",
											"\r",
											"// 2. Vérification du message de validation spécifique\r",
											"pm.test(\"L'erreur d'entier positif est bien détectée\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le message global\r",
											"    pm.expect(jsonData.message).to.eql(\"Erreur de validation des arguments\");\r",
											"    \r",
											"    // Vérifier que c'est le champ uniteSoinsId qui est en cause\r",
											"    pm.expect(jsonData.errors).to.have.property(\"uniteSoinsId\");\r",
											"    \r",
											"    // Vérifier la précision du message\r",
											"    pm.expect(jsonData.errors.uniteSoinsId).to.include(\"doit être un entier positif\");\r",
											"});\r",
											"\r",
											"// 3. Validation de la structure ErrorDetails\r",
											"pm.test(\"Le format de réponse est complet\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": -1 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						},
						{
							"name": "reservation -> 409 plus de lits disponibles",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											"// 1. Vérification du code de statut HTTP (409 est le standard pour un conflit d'état)\r",
											"pm.test(\"Statut attendu : 409 Conflict\", function () {\r",
											"    pm.response.to.have.status(409);\r",
											"});\r",
											"\r",
											"// 2. Vérification du message de conflit métier\r",
											"pm.test(\"L'erreur signale le manque de lits disponibles\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    \r",
											"    // Vérifier le message global\r",
											"    pm.expect(jsonData.message).to.eql(\"Conflit de Réservation\");\r",
											"    \r",
											"    // Vérifier la précision de l'erreur\r",
											"    pm.expect(jsonData.errors).to.have.property(\"disponibilite_lit\");\r",
											"    pm.expect(jsonData.errors.disponibilite_lit).to.include(\"plus de lits disponibles\");\r",
											"    pm.expect(jsonData.errors.disponibilite_lit).to.include(\"ID '17'\");\r",
											"});\r",
											"\r",
											"// 3. Validation de la structure ErrorDetails\r",
											"pm.test(\"Le format de réponse est complet et normé\", function () {\r",
											"    var jsonData = pm.response.json();\r",
											"    pm.expect(jsonData).to.have.all.keys('timestamp', 'message', 'errors', 'path');\r",
											"});"
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"auth": {
									"type": "bearer",
									"bearer": {
										"token": "{{token_jwt}}"
									}
								},
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"uniteSoinsId\": 17 }"
								},
								"url": "{{base_url}}/reservation/lit"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						}
					]
				},
				{
					"name": "/unitesoins",
					"item": [
						{
							"name": "201 -> creer unite soins",
							"event": [
								{
									"listen": "test",
									"script": {
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {},
										"requests": {}
									}
								}
							],
							"request": {
								"method": "POST",
								"header": [
									{
										"key": "Content-Type",
										"value": "application/json",
										"type": "text"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"hopital\": {\n        \"id\": 1 \n    },\n    \"specialisation\": {\n        \"id\": 1 \n    },\n    \"adresse\": \"122 Rue de l'Urgence\",\n    \"litsDisponibles\": 10,\n    \"latitude\": 44.1234567,\n    \"longitude\": 5.9876543\n}"
								},
								"url": "{{base_url}}/unitesoins"
							},
							"response": [
								{
									"name": "Success response",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "Content-Type",
												"value": "application/json",
												"name": "Content-Type",
												"type": "text"
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n\t\"method\": \"POST\"\n}"
										},
										"url": "https://postman-echo.com/post"
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Content-Encoding",
											"value": "gzip"
										},
										{
											"key": "Content-Type",
											"value": "application/json; charset=utf-8"
										},
										{
											"key": "Date",
											"value": "Thu, 04 Oct 2018 13:16:50 GMT"
										},
										{
											"key": "ETag",
											"value": "W/\"21a-6y1+9dLw9Ui/9TFPCS1aNOaKU38\""
										},
										{
											"key": "Server",
											"value": "nginx"
										},
										{
											"key": "Vary",
											"value": "Accept-Encoding"
										},
										{
											"key": "Content-Length",
											"value": "376"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										}
									],
									"cookie": [],
									"body": "{\n    \"args\": {},\n    \"data\": {\n        \"method\": \"POST\"\n    },\n    \"files\": {},\n    \"form\": {},\n    \"headers\": {\n        \"host\": \"postman-echo.com\",\n        \"content-length\": \"21\",\n        \"accept\": \"*/*\",\n        \"accept-encoding\": \"gzip, deflate\",\n        \"cache-control\": \"no-cache\",\n        \"content-type\": \"application/json\",\n        \"cookie\": \"sails.sid=s%3AG10mxUHVB65q6zAdIPRPk7kAxyMNpmeM.tn9m63fNTjoJBYkiUShtDIIliVwslI4ys8tvItjT2%2BA\",\n        \"postman-token\": \"e96e5264-9de6-4aa6-8737-3ab5489d561c\",\n        \"user-agent\": \"PostmanRuntime/7.3.0\",\n        \"x-forwarded-port\": \"443\",\n        \"x-forwarded-proto\": \"https\"\n    },\n    \"json\": {\n        \"method\": \"POST\"\n    },\n    \"url\": \"https://postman-echo.com/post\"\n}"
								}
							]
						}
					]
				}
			]
		},
		{
			"name": "404 end point pas trouvé",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Vérifier que le code de statut est bien 404\r",
							"pm.test(\"Statut attendu : 404 Not Found\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});\r",
							"\r",
							"// 2. Vérifier le message d'erreur global\r",
							"pm.test(\"Le message indique que la ressource est introuvable\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.message).to.eql(\"Ressource non trouvée\");\r",
							"});\r",
							"\r",
							"// 3. Vérifier le détail technique de l'erreur\r",
							"pm.test(\"Le détail explique que l'endpoint n'est pas mappé\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.errors.detail).to.include(\"n'existe pas ou n'est pas mappé\");\r",
							"});\r",
							"\r",
							"// 4. Vérifier que le chemin (path) retourné correspond à l'URL appelée\r",
							"pm.test(\"Le path dans l'erreur est correct\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.path).to.contain(\"/api/specilites/\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": {
						"token": "{{token_jwt}}"
					}
				},
				"method": "GET",
				"header": [],
				"url": "{{base_url}}/specilites/'zrfzerrfre'"
			},
			"response": []
		},
		{
			"name": "404 end point pas trouvé",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// 1. Vérifier que le code de statut est bien 404\r",
							"pm.test(\"Statut attendu : 404 Not Found\", function () {\r",
							"    pm.response.to.have.status(404);\r",
							"});\r",
							"\r",
							"// 2. Vérifier le message d'erreur global\r",
							"pm.test(\"Le message indique que la ressource est introuvable\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.message).to.eql(\"Ressource non trouvée\");\r",
							"});\r",
							"\r",
							"// 3. Vérifier le détail technique de l'erreur\r",
							"pm.test(\"Le détail explique que l'endpoint n'est pas mappé\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.errors.detail).to.include(\"n'existe pas ou n'est pas mappé\");\r",
							"});\r",
							"\r",
							"// 4. Vérifier que le chemin (path) retourné correspond à l'URL appelée\r",
							"pm.test(\"Le path dans l'erreur est correct\", function () {\r",
							"    var jsonData = pm.response.json();\r",
							"    pm.expect(jsonData.path).to.contain(\"uri=/api/\");\r",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": {
						"token": "{{token_jwt}}"
					}
				},
				"method": "GET",
				"header": [],
				"url": "{{base_url}}/"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080/api",
			"description": {
				"content": "Chemin d'acces",
				"type": "text/plain"
			}
		},
		{
			"key": "token_jwt",
			"value": "",
			"description": {
				"content": "récupéré à la connection",
				"type": "text/plain"
			}
		},
		{
			"key": "token_jwt_expire",
			"value": "eyJhbGciOiJIUzUxMiJ9.eyJpYXQiOjE3NjYxNDQxMTcsImV4cCI6MTc2NjE0NDExOSwic3ViIjoidXRpbGlzYXRldXIucG9zc2VkZUBjb21wdGUuY29tIiwicHJlbm9tIjoiUHJlbm9tX1V0aWxpc2F0ZXVyIiwicm9sZSI6IlJPTEVfVVNFUiIsImVtYWlsIjoidXRpbGlzYXRldXIucG9zc2VkZUBjb21wdGUuY29tIiwibm9tIjoiTm9tVXRpbGlzYXRldXIifQ.HCkSECJCDuuMxA5zAXFIpwVg6SaGmznfQAP6iAGMr7EMWiSVmF0UyVziQbpNl-L0gi3Je2wGEsHx8bZS9mVw6w",
			"description": {
				"content": "token expiré",
				"type": "text/plain"
			}
		}
	]
}